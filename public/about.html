<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>The Den — About Us</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    /* --- CORE VARIABLES --- */
    :root {
      --bg-dark: #050507;
      --bg-gradient: radial-gradient(circle at top, #1b1b22 0%, #000 100%);
      --text-main: #ffffff;
      --text-muted: rgba(255, 255, 255, 0.7);
      --accent: #ef4444; 
      --glass: rgba(255, 255, 255, 0.05);
      --glass-border: rgba(255, 255, 255, 0.1);
      --font-body: 'Inter', system-ui, -apple-system, sans-serif;
    }

    /* --- RESET --- */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      background: var(--bg-gradient);
      color: var(--text-main);
      font-family: var(--font-body);
      line-height: 1.6;
      overflow-x: hidden;
      padding-top: 80px;
    }

    /* --- UTILITIES --- */
    .container { max-width: 1000px; margin: 0 auto; padding: 0 20px; width: 100%; }
    
    .btn {
      display: inline-flex; align-items: center; gap: 8px;
      background: var(--accent); color: white;
      padding: 12px 24px; border-radius: 99px;
      font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em;
      text-decoration: none; font-size: 11px; border: none; cursor: pointer;
      transition: 0.2s; white-space: nowrap;
    }
    .btn:hover { opacity: 0.9; transform: translateY(-1px); }
    
    .section-title {
      font-size: 12px; color: var(--accent); letter-spacing: 0.2em;
      text-transform: uppercase; font-weight: 800; margin-bottom: 10px; display: block;
    }
    h2 { font-size: 36px; font-weight: 800; line-height: 1.1; margin-bottom: 24px; }
    p { margin-bottom: 20px; color: var(--text-muted); }

    /* --- HEADER --- */
    header {
      position: fixed; top: 0; width: 100%; z-index: 100;
      background: rgba(0,0,0,0.9); backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--glass-border);
    }
    .nav-wrap {
      display: flex; justify-content: space-between; align-items: center; height: 70px;
    }
    /* Updated Logo Style to handle Link */
    .logo { 
      font-weight: 900; font-size: 20px; text-transform: uppercase; 
      letter-spacing: 0.1em; font-style: italic; text-decoration: none; color: white;
    }
    .logo span { color: var(--accent); }
    
    .nav-links { display: flex; gap: 24px; }
    .nav-links a { color: var(--text-muted); text-decoration: none; font-size: 13px; font-weight: 500; text-transform: uppercase; }
    .nav-links a:hover, .nav-links a.active { color: white; }

    @media(max-width: 768px) {
      .nav-links { display: none; }
    }

    /* --- LAYOUT GRIDS --- */
    .about-grid { 
      display: grid; grid-template-columns: 1fr 1fr; gap: 60px; align-items: center; margin-bottom: 80px; 
    }
    .values-grid { 
      display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 80px; 
    }

    @media(max-width: 768px) { 
      .about-grid { grid-template-columns: 1fr; gap: 40px; margin-bottom: 60px; }
      .values-grid { grid-template-columns: 1fr; gap: 16px; margin-bottom: 60px; }
      h2 { font-size: 28px; }
      .about-img { order: -1; }
    }

    /* --- IMAGES & CARDS --- */
    .about-img { 
      width: 100%; border-radius: 12px; border: 1px solid var(--glass-border); 
      filter: grayscale(100%); transition: 0.5s; aspect-ratio: 16/10; object-fit: cover;
    }
    .about-img:hover { filter: grayscale(0%); }

    .value-card {
      background: var(--glass); border: 1px solid var(--glass-border);
      padding: 30px; border-radius: 16px; text-align: center;
    }
    .value-icon { color: var(--accent); width: 32px; height: 32px; margin-bottom: 16px; }

    /* --- CTA BOX --- */
    .cta-box {
      background: var(--glass); border: 1px solid var(--accent);
      padding: 60px; border-radius: 20px; text-align: center;
      background: linear-gradient(to bottom, rgba(239, 68, 68, 0.1), rgba(0,0,0,0));
    }
    @media(max-width: 768px) { .cta-box { padding: 40px 20px; } }

    /* --- EDITOR STYLES --- */
    #aboutEditModal input, #aboutEditModal textarea {
      width: 100%; background: rgba(0,0,0,0.5); border: 1px solid #333;
      color: white; padding: 10px; border-radius: 6px; font-family: monospace; font-size: 13px;
    }
    #aboutEditModal textarea { height: 80px; resize: vertical; }

    footer { border-top: 1px solid var(--glass-border); padding: 40px 0; margin-top: 60px; text-align: center; color: var(--text-muted); font-size: 12px; }
  </style>
</head>
<body>

  <div id="nsdBusiness" data-business-id="" style="display:none"></div>

  <header>
    <div class="container nav-wrap">
      <a href="index.html#home" class="logo" id="header_logo">THE <span>DEN</span></a>
      <nav class="nav-links">
        <a href="index.html">Home</a>
        <a href="about.html" class="active">About</a>
        <a href="services.html">Services</a>
        <a href="gallery.html">Gallery</a>
      </nav>
      <a href="#book" class="btn" onclick="openBooking()">Book Now</a>
    </div>
  </header>

  <main class="container" style="margin-top: 40px;">
    <div class="about-grid">
      <div>
        <span class="section-title">Our Story</span>
        <h2 id="about_title">A "Back Home" Kinda Thang</h2>
        <p id="about_p1">
          At The Den Barbershop, we're more than just a place to get a haircut. 
          From the very beginning, people told us, <strong>"It feels like back home in here."</strong>
        </p>
        <p id="about_p2">
          That's exactly the vibe we've built: comfort, peace, and a true community atmosphere.
        </p>
        <div style="display:flex; flex-wrap: wrap; gap:16px; margin-top:20px;">
          <div style="font-weight:700; font-size:14px; display:flex; align-items:center; gap:8px;">
            <i data-lucide="shield-check" style="color:var(--accent); width:16px;"></i> Safe Space
          </div>
          <div style="font-weight:700; font-size:14px; display:flex; align-items:center; gap:8px;">
            <i data-lucide="users" style="color:var(--accent); width:16px;"></i> Family Focused
          </div>
        </div>
      </div>
      <img id="about_img_1" src="https://images.unsplash.com/photo-1593702295094-aea22597af65?auto=format&fit=crop&q=80&w=800" class="about-img" alt="Barbershop Interior">
    </div>

    <div class="text-center" style="margin-bottom: 40px; text-align:center;">
      <span class="section-title">The Shop Code</span>
      <h2>Built on Respect</h2>
    </div>

    <div class="values-grid">
      <div class="value-card">
        <i data-lucide="music-2" class="value-icon"></i>
        <h3 style="font-size:18px; margin-bottom:10px;">Good Energy</h3>
        <p style="font-size:13px; margin:0;">No loud music. No chaos. Just a relaxing environment to unwind.</p>
      </div>
      <div class="value-card">
        <i data-lucide="ban" class="value-icon"></i>
        <h3 style="font-size:18px; margin-bottom:10px;">Professionalism</h3>
        <p style="font-size:13px; margin:0;">No profanity. We maintain a clean atmosphere suitable for all ages.</p>
      </div>
      <div class="value-card">
        <i data-lucide="heart-handshake" class="value-icon"></i>
        <h3 style="font-size:18px; margin-bottom:10px;">Community</h3>
        <p style="font-size:13px; margin:0;">All races and backgrounds are welcome. We are here to serve the people.</p>
      </div>
    </div>

    <div class="about-grid">
      <img id="about_img_2" src="https://images.unsplash.com/photo-1554580398-333d45e45483?auto=format&fit=crop&q=80&w=800" class="about-img" alt="Pool Table">
      <div>
        <span class="section-title">The Vibe</span>
        <h2 id="vibe_title">More Than A Cut</h2>
        <p id="vibe_p1">It's about connection. We have a pool table, chess boards, and a lounge area.</p>
        <p id="vibe_p2">Come for the fade, stay for the conversation. This is the third place.</p>
      </div>
    </div>

    <div class="cta-box">
      <span class="section-title">Careers</span>
      <h2 style="margin-bottom: 20px;">Join The Den Team</h2>
      <p style="max-width: 600px; margin: 0 auto 30px;">
        Are you a licensed barber looking for a chair? Join a team built on respect.
      </p>
      <button class="btn" style="background:white; color:black; padding: 16px 32px;">Apply Now</button>
    </div>
  </main>

  <footer>
    <div class="container">
      <div style="font-weight:900; font-size:24px; margin-bottom:10px; text-transform:uppercase; font-style:italic;">THE <span style="color:var(--accent)">DEN</span></div>
      <p>© 2026 The Den Barbershop. Powered by Net Studio.</p>
    </div>
  </footer>

  <button type="button" id="aboutEditBtn" class="btn" style="position:fixed; right:16px; bottom:16px; z-index:9999; display:none;">
    <i data-lucide="pencil" style="width:16px;"></i> About Edit
  </button>
  <div id="aboutEditModal" style="display:none; position:fixed; inset:0; z-index:10000;">
    <div id="aboutEditBackdrop" style="position:absolute; inset:0; background:rgba(0,0,0,.75); backdrop-filter:blur(10px);"></div>
    <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); width:94%; max-width:720px; max-height:86vh; overflow:auto; background: rgba(10,10,12,.92); border:1px solid rgba(255,255,255,.12); border-radius:20px; padding:18px; color:#fff;">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <div style="font-weight:900; letter-spacing:.14em; text-transform:uppercase; font-size:12px;">About Editor</div>
        <button type="button" id="aboutEditClose" class="btn" style="background:transparent; border:1px solid rgba(255,255,255,.18);">Close</button>
      </div>
      <div style="margin-top:14px; display:grid; gap:12px;">
        <input id="ed_about_title" placeholder="Main title" />
        <textarea id="ed_about_p1" placeholder="Paragraph 1"></textarea>
        <textarea id="ed_about_p2" placeholder="Paragraph 2"></textarea>
        <input id="ed_about_img_1" placeholder="Top image URL" />
        <input id="ed_vibe_title" placeholder="Vibe section title" />
        <textarea id="ed_vibe_p1" placeholder="Vibe paragraph 1"></textarea>
        <textarea id="ed_vibe_p2" placeholder="Vibe paragraph 2"></textarea>
        <input id="ed_about_img_2" placeholder="Bottom image URL" />
        <div style="display:flex; gap:10px;">
          <button type="button" id="aboutEditSave" class="btn">Save</button>
          <button type="button" id="aboutEditExport" class="btn" style="background:white;color:black;">Export JSON</button>
          <div id="aboutEditMsg" style="font-size:12px; align-self:center;"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    lucide.createIcons();

    // 1. Supabase Initialization & Business ID Injection
    window.NS = window.NS || {
      SUPABASE_URL: "https://jdvdgvolfmvlgyfklbwe.supabase.co",
      SUPABASE_ANON_KEY: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpkdmRndm9sZm12bGd5ZmtsYndlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM1Mjk5MDgsImV4cCI6MjA3OTEwNTkwOH0.xiAOgWof9En3jbCpY1vrYpj3HD-O6jMHbamIHTSflek",
      BUSINESS_SLUG: "net-studio-barbershop"
    };

    (async () => {
      const NS = window.NS;
      const sb = supabase.createClient(NS.SUPABASE_URL, NS.SUPABASE_ANON_KEY);

      const { data, error } = await sb
        .from("business")
        .select("id,name")
        .eq("slug", NS.BUSINESS_SLUG)
        .maybeSingle();

      if (error || !data?.id) {
        console.error("About page: Business not found for slug", NS.BUSINESS_SLUG, error);
        return;
      }

      // Inject ID for the booking engine
      document.getElementById("nsdBusiness")?.setAttribute("data-business-id", data.id);
      document.body.dataset.businessId = data.id;

      // Update logo dynamically if needed
      const logo = document.getElementById("header_logo");
      if (logo && data.name) {
        const parts = data.name.split(" ");
        logo.innerHTML = `${parts[0]} <span>${parts.slice(1).join(" ")}</span>`;
      }
    })();

    // 2. Editor Logic (Matches the current page structure)
    (() => {
      const qs = new URLSearchParams(location.search);
      const EDIT_MODE = qs.get("edit") === "1";
      const KEY = "ns_tpl_den_about_v1";

      const aboutTitle = document.getElementById("about_title");
      const aboutP1 = document.getElementById("about_p1");
      const aboutP2 = document.getElementById("about_p2");
      const aboutImg1 = document.getElementById("about_img_1");
      const vibeTitle = document.getElementById("vibe_title");
      const vibeP1 = document.getElementById("vibe_p1");
      const vibeP2 = document.getElementById("vibe_p2");
      const aboutImg2 = document.getElementById("about_img_2");

      const btn = document.getElementById("aboutEditBtn");
      const modal = document.getElementById("aboutEditModal");
      const back = document.getElementById("aboutEditBackdrop");
      const close = document.getElementById("aboutEditClose");
      const msg = document.getElementById("aboutEditMsg");

      const ed = id => document.getElementById(id);
      const fields = {
        about_title: ed("ed_about_title"),
        about_p1: ed("ed_about_p1"),
        about_p2: ed("ed_about_p2"),
        about_img_1: ed("ed_about_img_1"),
        vibe_title: ed("ed_vibe_title"),
        vibe_p1: ed("ed_vibe_p1"),
        vibe_p2: ed("ed_vibe_p2"),
        about_img_2: ed("ed_about_img_2")
      };

      function getCurrent() {
        return {
          about_title: aboutTitle?.textContent || "",
          about_p1: aboutP1?.innerHTML || "",
          about_p2: aboutP2?.innerHTML || "",
          about_img_1: aboutImg1?.src || "",
          vibe_title: vibeTitle?.textContent || "",
          vibe_p1: vibeP1?.textContent || "",
          vibe_p2: vibeP2?.textContent || "",
          about_img_2: aboutImg2?.src || ""
        };
      }

      function apply(d) {
        if (!d) return;
        if (aboutTitle) aboutTitle.textContent = d.about_title || "";
        if (aboutP1) aboutP1.innerHTML = d.about_p1 || "";
        if (aboutP2) aboutP2.innerHTML = d.about_p2 || "";
        if (aboutImg1) aboutImg1.src = d.about_img_1 || "";
        if (vibeTitle) vibeTitle.textContent = d.vibe_title || "";
        if (vibeP1) vibeP1.textContent = d.vibe_p1 || "";
        if (vibeP2) vibeP2.textContent = d.vibe_p2 || "";
        if (aboutImg2) aboutImg2.src = d.about_img_2 || "";
      }

      function collect() {
        return {
          about_title: fields.about_title?.value || "",
          about_p1: fields.about_p1?.value || "",
          about_p2: fields.about_p2?.value || "",
          about_img_1: fields.about_img_1?.value || "",
          vibe_title: fields.vibe_title?.value || "",
          vibe_p1: fields.vibe_p1?.value || "",
          vibe_p2: fields.vibe_p2?.value || "",
          about_img_2: fields.about_img_2?.value || "",
          saved_at: new Date().toISOString()
        };
      }

      function save(d) { localStorage.setItem(KEY, JSON.stringify(d)); }
      function load() { try { return JSON.parse(localStorage.getItem(KEY)); } catch { return null; } }

      const boot = load();
      if (boot) apply(boot);

      if (EDIT_MODE && btn) {
        btn.style.display = "inline-flex";
        btn.addEventListener("click", () => {
          modal.style.display = "block";
          document.body.style.overflow = "hidden";
          const cur = load() || getCurrent();
          Object.keys(fields).forEach(k => { if(fields[k]) fields[k].value = cur[k] || ""; });
        });
      }

      const closeModal = () => { modal.style.display = "none"; document.body.style.overflow = ""; };
      close?.addEventListener("click", closeModal);
      back?.addEventListener("click", closeModal);

      Object.values(fields).forEach(el => {
        if (!el) return;
        el.addEventListener("input", () => apply(collect()));
      });

      const saveBtn = document.getElementById("aboutEditSave");
      if (saveBtn) {
        saveBtn.addEventListener("click", () => {
          save(collect());
          if (msg) { msg.textContent = "Saved ✅"; setTimeout(() => (msg.textContent = ""), 1200); }
        });
      }

      const exportBtn = document.getElementById("aboutEditExport");
      if (exportBtn) {
        exportBtn.addEventListener("click", async () => {
          const json = JSON.stringify(collect(), null, 2);
          try { await navigator.clipboard.writeText(json); if (msg) msg.textContent = "Copied JSON ✅"; } catch { alert(json); }
        });
      }
    })();
  </script>

  <script src="/assets/js/netstudio_booking.js"></script>
</body>
</html>
